{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Api } from './base';\nconst DEFAULT_DATE_FORMAT = 'dd/MM/yyyy';\nexport class ModelsApi extends Api {\n  constructor(transformer) {\n    super({});\n\n    _defineProperty(this, \"transformer\", void 0);\n\n    this.transformer = transformer;\n  }\n\n  createBackendParameters(model, transformer, sendPkOnly = false) {\n    const catalogParams = transformer.toObject(model, sendPkOnly);\n    return {\n      params: {\n        json: JSON.stringify({\n          dateFormat: DEFAULT_DATE_FORMAT,\n          catalogo: JSON.stringify(catalogParams),\n          claseCatalogo: model.backendModelReference\n        })\n      }\n    };\n  }\n\n  getTransformer(options) {\n    return options && options.transformer ? options.transformer : this.transformer;\n  }\n\n  async findByPK(model, options) {\n    const transformer = this.getTransformer();\n    return this.get('obtenerCatalogo.do', this.createBackendParameters(model, transformer, true)).then(response => {\n      if (!response.data) {\n        throw new Error('Occurrio un error al consular el modelo');\n      }\n\n      return transformer.fromObject(response.data);\n    });\n  }\n\n  async create(model, options) {\n    const transformer = this.getTransformer();\n    return this.get('altaCatalogo.do', this.createBackendParameters(model, transformer)).then(response => {\n      return transformer.fromObject(response.data);\n    });\n  }\n\n  async update(model, options) {\n    const transformer = this.getTransformer();\n    return this.get('modificaCatalogo.do', this.createBackendParameters(model, transformer)).then(() => {\n      return model;\n    });\n  }\n\n  async destroy(model, options) {\n    const transformer = this.getTransformer();\n    await this.get('bajaCatalogo.do', this.createBackendParameters(model, transformer, true));\n  }\n\n  async destroyMany(models) {\n    const allPromises = models.reduce((promises, model) => {\n      promises.push(this.destroy(model));\n      return promises;\n    }, []);\n    return this.handleBatchOperation(allPromises, models);\n  }\n\n}\nexport default ModelsApi;","map":null,"metadata":{},"sourceType":"module"}