{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { SortTypes } from './types';\nimport GenericTableRow from './GenericTableRow';\nimport GenericTableToolbar from './GenericTableToolbar';\nimport GenericTableHead from './GenericTableHead';\nimport { GenericTableCallbacksContext } from './context';\nimport ExcelTransformer from '../../services/ExcelTransformer';\nvar ROW_HEIGHT = 53;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      width: '100%',\n      marginBottom: theme.spacing(2)\n    },\n    table: {\n      width: '100%'\n    }\n  };\n});\n\nfunction toggleSelectedElementInList(selectedElements, row) {\n  if (selectedElements.has(row)) {\n    selectedElements[\"delete\"](row);\n  } else {\n    selectedElements.add(row);\n  }\n\n  return new Set(selectedElements);\n}\n\nfunction rowsDisplayedFormatter(props) {\n  var from = props.from,\n      to = props.to,\n      count = props.count;\n  return \"\".concat(from, \"-\").concat(to === -1 ? count : to, \" de \").concat(count !== -1 ? count : 'mÃ¡s de' + to);\n}\n\nfunction GenericTable(props) {\n  var onNew = props.onNew,\n      _props$multipleSelect = props.multipleSelect,\n      multipleSelect = _props$multipleSelect === void 0 ? true : _props$multipleSelect;\n\n  var _useContext = useContext(GenericTableCallbacksContext),\n      onSelect = _useContext.onSelect;\n\n  var onSelectHandler = props.onSelect || onSelect;\n  var title = props.title,\n      data = props.data,\n      tableId = props.tableId,\n      _props$columns = props.columns,\n      columns = _props$columns === void 0 ? [] : _props$columns,\n      _props$showActionsHea = props.showActionsHeader,\n      showActionsHeader = _props$showActionsHea === void 0 ? true : _props$showActionsHea,\n      _props$additionalActi = props.additionalActionsComponent,\n      additionalActionsComponent = _props$additionalActi === void 0 ? null : _props$additionalActi;\n  var keyColum = columns[0].field;\n\n  var _React$useState = React.useState(SortTypes.Asc),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      order = _React$useState2[0],\n      setOrder = _React$useState2[1];\n\n  var _React$useState3 = React.useState(keyColum),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      orderBy = _React$useState4[0],\n      setOrderBy = _React$useState4[1];\n\n  var _React$useState5 = React.useState(0),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      page = _React$useState6[0],\n      setPage = _React$useState6[1];\n\n  var _React$useState7 = React.useState(new Set()),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      selectedRows = _React$useState8[0],\n      setSelectedRows = _React$useState8[1];\n\n  var _React$useState9 = React.useState(5),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      rowsPerPage = _React$useState10[0],\n      setRowsPerPage = _React$useState10[1];\n\n  var classes = useStyles();\n\n  var isSelected = function isSelected(row) {\n    return selectedRows.has(row);\n  };\n\n  var currentRows = data.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage);\n  useEffect(function () {\n    setSelectedRows(new Set());\n  }, [data]);\n\n  function handleClick(row) {\n    if (multipleSelect) {\n      var newSelectedSet = toggleSelectedElementInList(selectedRows, row);\n      setSelectedRows(newSelectedSet);\n      onSelectHandler(Array.from(newSelectedSet));\n    } else {\n      setSelectedRows(new Set([row]));\n      onSelectHandler([row]);\n    }\n  }\n\n  var rows = currentRows.map(function (row) {\n    return __jsx(GenericTableRow, {\n      key: row.uniqueKey,\n      uniqueKey: row.uniqueKey,\n      row: row,\n      isSelected: isSelected(row),\n      onClick: handleClick,\n      columns: columns,\n      useCheckbox: multipleSelect\n    });\n  });\n  var emptyRowsCount = rowsPerPage - currentRows.length;\n  var emptyRowsPlaceholder = null;\n\n  if (emptyRowsCount > 0) {\n    emptyRowsPlaceholder = __jsx(TableRow, {\n      style: {\n        height: ROW_HEIGHT * emptyRowsCount\n      }\n    }, __jsx(TableCell, {\n      colSpan: columns.length + 1\n    }));\n  }\n\n  var handleRequestSort = function handleRequestSort(property) {\n    var isAsc = orderBy === property && order === SortTypes.Asc;\n    setOrder(isAsc ? SortTypes.Asc : SortTypes.Desc);\n    setOrderBy(property);\n  };\n\n  var handleSelectAllClick = function handleSelectAllClick(checked) {\n    if (checked) {\n      setSelectedRows(new Set(currentRows));\n      return;\n    }\n\n    setSelectedRows(new Set());\n  };\n\n  var handleChangePage = function handleChangePage(event, newPage) {\n    setPage(newPage);\n  };\n\n  var handleChangeRowsPerPage = function handleChangeRowsPerPage(event) {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  var downloadHandler = function downloadHandler() {\n    new ExcelTransformer(data, columns, title, title).download(); //console.log('exportedExcel', exportedExcel);\n  };\n\n  return __jsx(Paper, {\n    className: classes.root,\n    elevation: 3\n  }, __jsx(GenericTableToolbar, {\n    numSelected: selectedRows.size,\n    title: title,\n    onNew: onNew,\n    onDownload: downloadHandler,\n    showActions: showActionsHeader,\n    multipleSelect: multipleSelect,\n    actionsComponent: additionalActionsComponent\n  }), __jsx(TableContainer, {\n    className: classes.table\n  }, __jsx(Table, {\n    id: tableId\n  }, __jsx(GenericTableHead, {\n    columns: columns,\n    numSelected: selectedRows.size,\n    order: order,\n    orderBy: orderBy,\n    onSelectAllClick: handleSelectAllClick,\n    onRequestSort: handleRequestSort,\n    rowCount: rows.length,\n    multipleSelect: multipleSelect\n  }), __jsx(TableBody, null, rows, emptyRowsPlaceholder))), __jsx(TablePagination, {\n    rowsPerPageOptions: [5, 10, 25],\n    labelRowsPerPage: \"Resultados por p\\xE1gina:\",\n    labelDisplayedRows: rowsDisplayedFormatter,\n    component: \"div\",\n    count: data.length,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    onChangePage: handleChangePage,\n    onChangeRowsPerPage: handleChangeRowsPerPage\n  }));\n}\n\nexport default GenericTable;","map":null,"metadata":{},"sourceType":"module"}